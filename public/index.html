<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <link rel="preconnect" href="https://fonts.bunny.net">
  <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- CodeMirror CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/dracula.min.css">
  <!-- CodeMirror JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/sql/sql.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.5.0/sql-wasm.js"></script>
  <link rel="stylesheet" href="styles/styles.css">
  <title>PingenDATA</title>
</head>

<body class="text-gray-800 font-inter">
  <!--sidenav -->
  <div
    class="fixed left-0 top-0 w-64 h-full bg-gradient-to-br from-violet-100 to-gray-200 bg-opacity-90 text-gray-900 p-4 z-50 sidebar-menu transition-transform overflow-y-auto">
    <a href="#" class="flex items-center pb-4">
      <h2 class="font-bold text-3xl text-gray-800 flex items-center" style="font-family: 'Roboto', sans-serif;">
        <span class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-2 py-1 rounded-l-md">Pingen</span>
        <span class="bg-indigo-500 text-white px-2 py-1 rounded-r-md">Data</span>
      </h2>
    </a>
    <ul class="mt-2">
      <li class="mb-2">
        <span class="text-gray-600 font-semibold">Styles</span>
        <ul class="mt-2">
          <div class="p-2">
            <div class="flex flex-col gap-1">
              <div class="flex flex-col">
                <label for="tableBgColor" class="block text-sm font-medium text-gray-700 mb-1">Fondo de Tabla</label>
                <input type="color" id="tableBgColor" class="w-full p-2 rounded-md bg-gray-100" value="#f9fafb">
                <!-- Fondo de tabla más claro (color crema/blanco) -->
              </div>
              <div class="flex flex-col">
                <label for="headerBgColor" class="block text-sm font-medium text-gray-700 mb-1">Fondo de
                  Encabezado</label>
                <input type="color" id="headerBgColor" class="w-full p-2 rounded-md bg-gray-100" value="#d6bcfa">
                <!-- Fondo de cabecera en púrpura color pastel -->
              </div>
              <div class="flex flex-col">
                <label for="cellTextColor" class="block text-sm font-medium text-gray-700 mb-1">Texto de Celdas</label>
                <input type="color" id="cellTextColor" class="w-full p-2 rounded-md bg-gray-100" value="#111827">
                <!-- Texto de celda -->
              </div>
              <div class="flex flex-col">
                <label for="headerTextColor" class="block text-sm font-medium text-gray-700 mb-1">Texto de
                  Encabezado</label>
                <input type="color" id="headerTextColor" class="w-full p-2 rounded-md bg-gray-100" value="#ffffff">
                <!-- Texto de cabecera en blanco -->
              </div>
              <div class="flex flex-col">
                <label for="relationshipColor" class="block text-sm font-medium text-gray-700 mb-1">Color de
                  Relaciones</label>
                <input type="color" id="relationshipColor" class="w-full p-2 rounded-md bg-gray-100" value="#6b7280">
                <!-- Color de relación -->
              </div>
              <div class="flex flex-col">
                <label for="lineType" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Línea</label>
                <select id="lineType" name="lineType"
                  class="w-full h-10 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  <option value="solid">Sólida</option>
                  <option value="dashed">Discontinua</option>
                  <option value="dotted">Punteada</option>
                </select>
              </div>
            </div>
            <div class="mt-4">
              <label for="fontStyle" class="block text-sm font-medium text-gray-700 mb-1">Estilo de Fuente</label>
              <ul class="mt-2">
                <li>
                  <label class="inline-flex items-center">
                    <input type="checkbox" class="form-checkbox h-4 w-4 text-gray-700" checked>
                    <span class="ml-2 text-sm">Texto en Negrita</span>
                  </label>
                </li>
                <li>
                  <label class="inline-flex items-center mt-2">
                    <input type="checkbox" class="form-checkbox h-4 w-4 text-gray-700">
                    <span class="ml-2 text-sm">Texto en Itálica</span>
                  </label>
                </li>
              </ul>
              <select id="fontFamily" name="fontStyle"
                class="w-full h-10 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="Arial">Arial</option>
                <option value="Courier New">Courier New</option>
                <option value="Georgia">Georgia</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Verdana">Verdana</option>
              </select>
            </div>
          </div>
        </ul>
      </li>
      <li class="mb-2">
        <span class="text-gray-600 font-semibold">Entities</span>
        <ul class="mt-2">
          <li class="group">
            <a href="#"
              class="flex items-center py-2 px-4 text-gray-700 hover:bg-gray-200 hover:text-gray-900 rounded-md">
              <i class='bx bx-archive mr-3 text-lg'></i>
              <span class="text-sm">Archive</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="fixed top-0 left-0 w-full h-full bg-black/50 z-40 md:hidden sidebar-overlay"></div>
  <!-- end sidenav -->

  <main class="w-full md:w-[calc(100%-256px)] md:ml-64 bg-gray-200 min-h-screen transition-all main">
    <!-- navbar -->
    <div
      class="py-2 px-6 bg-gradient-to-r from-stone-100 to-gray-200 flex items-center shadow-md sticky top-0 left-0 z-30">
      <button type="button" class="text-lg text-gray-900 font-semibold sidebar-toggle">
        <i class="ri-menu-line"></i>
      </button>

      <ul class="ml-auto flex items-center">
        <li class="mr-1 dropdown">
          <button type="button"
            class="dropdown-toggle text-gray-400 mr-4 w-8 h-8 rounded flex items-center justify-center  hover:text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="hover:bg-gray-100 rounded-full"
              viewBox="0 0 24 24" style="fill: gray;transform: ;msFilter:;">
              <path
                d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z">
              </path>
            </svg>
          </button>
          <div
            class="dropdown-menu shadow-md shadow-black/5 z-30 hidden max-w-xs w-full bg-white rounded-md border border-gray-100">
            <form action="" class="p-4 border-b border-b-gray-100">
              <div class="relative w-full">
                <input type="text"
                  class="py-2 pr-4 pl-10 bg-gray-50 w-full outline-none border border-gray-100 rounded-md text-sm focus:border-blue-500"
                  placeholder="Search...">
                <i class="ri-search-line absolute top-1/2 left-4 -translate-y-1/2 text-gray-900"></i>
              </div>
            </form>
          </div>
        </li>
        <li class="dropdown">
          <button type="button" class="dropdown-toggle flex items-center">
            <div class="flex-shrink-0 w-10 h-10 relative">
              <div class="p-1 bg-white rounded-full focus:outline-none focus:ring">
                <img id="userAvatar" class="w-8 h-8 rounded-full object-cover align-middle"
                  src="https://ui-avatars.com/api/?background=212121&color=1DB954&name=Guest" alt="Avatar">
                <div class="top-0 left-7 absolute w-3 h-3 bg-lime-400 border-2 border-white rounded-full animate-ping">
                </div>
                <div class="top-0 left-7 absolute w-3 h-3 bg-lime-500 border-2 border-white rounded-full"></div>
              </div>
            </div>
            <div class="p-2 md:block text-left">
              <h2 class="text-sm font-semibold text-gray-800">Jehn Doe</h2>
              <p class="text-xs text-gray-500">Guest</p>
            </div>
          </button>
          <ul
            class="dropdown-menu shadow-md shadow-black/5 z-30 hidden py-1.5 rounded-md bg-white border border-gray-100 w-full max-w-[140px]">
            <li>
              <a href="#"
                class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-[#f84525] hover:bg-gray-50">Profile</a>
            </li>
            <li>
              <a href="#"
                class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-[#f84525] hover:bg-gray-50">Settings</a>
            </li>
            <li>
              <form method="POST" action="">
                <a role="menuitem"
                  class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-[#f84525] hover:bg-gray-50 cursor-pointer"
                  onclick="event.preventDefault(); this.closest('form').submit();">
                  Log Out
                </a>
              </form>
            </li>
          </ul>
        </li>
      </ul>
    </div>

    <script>
      // Obtener el avatar del usuario
      const userAvatar = document.getElementById('userAvatar');
      const username = 'Guest'; // Nombre de usuario (se puede cambiar dinámicamente)

      // Configurar la URL del servicio de avatares
      const avatarUrl = `https://ui-avatars.com/api/?background=212121&color=1DB954&name=${encodeURIComponent(username)}`;

      // Actualizar la imagen del avatar
      userAvatar.src = avatarUrl;
    </script>

    <!-- end navbar -->
    <section class="px-4 py-8">
      <div class="flex flex-col gap-4">
        <div class="bg-gradient-to-br from-violet-100 to-gray-200 bg-opacity-90 text-gray-900 p-4 rounded-md shadow-md">
          <div class="flex justify-between items-center">
            <h2 class="text-xl font-semibold text-gray-800">Editor</h2>
            <div
              class="bg-gray-200 text-[#333] flex items-center shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)] p-1 w-max font-[sans-serif] rounded-md overflow-hidden">
              <div class="px-4 flex">
                <span id="fileName" class="ml-2 text-gray-500"></span>
              </div>
              <input type="file" id="fileInput" class="hidden" />
              <label for="fileInput"
                class="block px-6 py-2.5 rounded text-gray-600 text-sm tracking-wider font-semibold border-none outline-none cursor-pointer bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-2 py-1 rounded-l-md hover:bg-gray-100">Browse</label>
            </div>
          </div>
          <textarea id="sql-editor" class="editor"></textarea>
        </div>
        <div class="bg-gradient-to-br from-violet-100 to-gray-200 bg-opacity-90 text-gray-900 p-4 rounded-md shadow-md">
          <div class="flex justify-between items-center flex-wrap">
            <h2 class="text-xl font-semibold text-gray-800 mb-2 md:mb-0">Resulting</h2>
            <div
              class="ml-auto bg-gray-200 text-[#333] flex items-center shadow-[0_2px_10px_-3px_rgba(6,81,237,0.3)] p-1 w-full md:w-max font-[sans-serif] rounded-md overflow-hidden">
              <button type="button" id="viewFullScreen"
                class="px-5 py-2.5 flex items-center text-sm tracking-wider outline-none hover:bg-gray-200 transition ease-in-out duration-150">
                <svg class="w-4 h-4 fill-gray-400" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 3h18v2H3V3zm1 4h16v14H4V7zm2 2v10h12V9H6z" />
                </svg>
              </button>

              <select id="downloadFormat" class="px-3 py-2.5 text-sm outline-none bg-gray-200 rounded-md">
                <option value="image">Imagen</option>
                <option value="diagram">Diagrama</option>
              </select>

              <button type="button" id="downloadButton"
                class="block px-3 py-2.5 flex items-center text-sm tracking-wider outline-none bg-gradient-to-r from-green-300 to-teal-300 text-white transition ease-in-out duration-150 ml-1">
                <svg class="w-4 h-4 fill-white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20 9v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9h2v9h12V9h2zM10 6V2h4v4h3l-5 5-5-5h3z" />
                </svg>
              </button>

              <button type="button" id="shareDiagram"
                class="px-3 py-2.5 flex items-center text-sm tracking-wider outline-none bg-gradient-to-r from-blue-500 to-cyan-500 text-white to-indigo-500 text-white transition ease-in-out duration-150">
                <svg class="w-4 h-4 fill-white mr-1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z" />
                </svg>
              </button>

              <button type="button" id="showResult"
                class="px-3 py-2.5 flex items-center text-sm tracking-wider outline-none bg-gradient-to-r from-purple-500 to-indigo-500 text-white transition ease-in-out duration-150">
                <svg class="w-4 h-4 fill-white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M12 4V1L8 5l4 4V6c3.86 0 7 3.14 7 7 0 1.4-.41 2.72-1.12 3.83l1.45 1.45C20.34 16.97 21 14.56 21 12c0-4.97-4.03-9-9-9zm-1 15c-3.86 0-7-3.14-7-7 0-1.4.41-2.72 1.12-3.83L3.67 6.72C3.04 8.26 2.67 10.06 2.67 12c0 4.97 4.03 9 9 9v3l4-4-4-4v3z" />
                </svg>
              </button>
            </div>
          </div>
          <h2 class="text-xl font-semibold text-gray-800 mb-4"></h2>
          <div id="resultContainer"
            class="w-full h-96 border border-gray-300 rounded-md flex items-center justify-center">
            <span class="text-gray-500" id="placeholder">No image generated yet</span>
          </div>
        </div>
        <!-- Modal -->
        <div id="shareModal"
          class="fixed top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800 bg-opacity-50 hidden">
          <div class="bg-white p-4 rounded-md shadow-md">
            <div class="flex justify-between items-center">
              <h2 class="text-lg font-semibold text-gray-800 mb-4">Compartir Diagrama</h2>
              <button type="button" id="closeModal" class="text-gray-500 hover:text-gray-700 focus:outline-none">
                <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
                </svg>
              </button>
            </div>
            <label for="userId" class="block text-sm font-medium text-gray-700 mb-1">ID de Usuario:</label>
            <input type="text" id="userId" name="userId"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-500 mb-4">
            <button type="button" id="sendShareRequest"
              class="w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-md text-sm font-medium focus:outline-none focus:ring focus:border-blue-500">Compartir</button>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script>
    // JavaScript para manejar el modal de compartir
    const shareButton = document.getElementById('shareDiagram');
    const modal = document.getElementById('shareModal');
    const closeModalButton = document.getElementById('closeModal');

    shareButton.addEventListener('click', () => {
      modal.classList.remove('hidden');
      document.body.classList.add('overflow-hidden'); // Evita que el fondo se desplace mientras el modal está abierto
    });

    closeModalButton.addEventListener('click', () => {
      modal.classList.add('hidden');
      document.body.classList.remove('overflow-hidden');
    });
  </script>

  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="scripts/services.js"></script>
  <script src="scripts/ui.js"></script>
  <script src="scripts/utils.js"></script>
  <script src="scripts/app.js"></script>
</body>

</html>